<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="Generator" content="dashboard" />
    <title></title>
    <link href="../../../Themes/lightblue/jqueryui/jquery-ui-1.10.3.custom.min.css" rel="stylesheet" />
    <link href="../../../themes/lightblue/jqgrid/ui.jqgrid.css" rel="stylesheet" />
    <link href="../../../themes/lightblue/page/page.css" rel="stylesheet" />
    <link href="../../../themes/lightblue/ca/db/dashboard.css" rel="stylesheet" />

    <script src="../../../Javascript/core/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="../../../javascript/core/jquery-ui-1.10.3.custom.min.js"></script>

    <script src="../../../javascript/common/tools.js" type="text/javascript"></script>
    <script src="../../../javascript/common/pagetools.js" type="text/javascript"></script>

    <script src="../../../Javascript/JSControl/Condition/comselect.js" type="text/javascript"></script>

    <script src="../../../javascript/JSControl/Condition/controlmanagernew.js"></script>

    <script src="../../../javascript/JSControl/Common/toolbar.js"></script>
    <script src="../../../javascript/JSControl/Condition/timepicker.js"></script>

    <script src="../../../javascript/JSControl/SmartGrid/JqGrid/grid.locale-cn.js"></script>
    <script src="../../../javascript/JSControl/SmartGrid/JqGrid/jquery.jqGrid.min.js"></script>
    <script src="../../../javascript/JSControl/SmartGrid/JqGrid/SmartGrid.js"></script>

    <script src="../../../javascript/JSControl/SampleChart/Scripts/SampleChart.js"></script>

    <script src="../../Dashboard/Js/View.js"></script>
    <script type="text/javascript">
        $(function () {
            var measure = decodeURI(dss.request("measure"));//解码

            $.dashboard.init({
                dashboardId: "407793988",
                isLayout: false,
                condition: [],
                layoutSettings: [
                    {
                        divId: "report_0",
                        autoBind: true,
                        beforeBind: function (id, opts) {
                            if (!isNullProperty(measure)) {
                                var meaList = [];
                                for (var i = 0; i < opts.analyzer.MeasureList.length; i++) {
                                    if (opts.analyzer.MeasureList[i].DisplayName == measure) {
                                        meaList.push(opts.analyzer.MeasureList[i]);
                                    }
                                }

                                opts.analyzer.MeasureList = meaList;
                            }

                            return opts;
                        }
                    }
                ],
                callback: {
                    beforeQuery: function () {
                        //处理查询事件
                    },
                    exportClick: null
                }
            });
        });

        //判断值是否为空
        function isNullProperty(p) {
            if (p == undefined || p == null || (typeof (p) == "string" && p == "")) {
                return true;
            }
            else {
                return false;
            }
        }
    </script>
</head>
<body>
    <div id="m"></div>
    <div class="dss_db_view">
        <div id="dashboard-query" class="dss_db_view_query">
            <ul class="toolbar">
                <li class='item'>
                    <input type="text" id="txtTime" style='width: 105px;' /></li>
                <li class='item'>
                    <div id='queryControl'></div>
                </li>
                <li class='item'>
                    <input type='button' id='btnQuery' value='查询' class='button' /></li>
                <li class='item'>
                    <input type='button' id='btnExport' value='导出' class='button' /></li>
            </ul>
        </div>
        <div class="dss_db_view_layout" id="dashboard-layout">
            <style>
                #report_0 {
                    width: 100%;
                    height: 100%;
                    border: 1px solid #cccccc;
                }
            </style>
            <!--css-->
            <div id="report_0" reportdivid="0" class="report" isreport="true"></div>

        </div>
    </div>
</body>
</html>
